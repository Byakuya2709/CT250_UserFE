import{_ as m,r as h,c as t,o as a,a as e,h as _,t as i,F as f,f as v,d as l,w as p,g,H as I}from"./index-ocYKao6t.js";const{cookies:V}=I(),w={name:"User",data(){return{userInfo:{},email:""}},computed:{user(){return this.$authStore.user},role(){return this.$authStore.role},navItems(){return[{name:"Thông Tin Tài Khoản",path:`/user/${this.userInfo.id}/profile`,iconPath:"M8 3.5a.5.5 0 0 1 .5.5v4h3.5a.5.5 0 0 1 0 1H8a.5.5 0 0 1-.5-.5V4a.5.5 0 0 1 .5-.5z M8 1a7 7 0 1 1 0 14A7 7 0 0 1 8 1zM1 8a7 7 0 1 0 14 0A7 7 0 0 0 1 8z"},{name:"Vé Đã Mua",path:`/user/${this.userInfo.id}/tickets`,iconPath:"M2 3.5V2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v1.5h1a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1v-10a1 1 0 0 1 1-1h1zm11-1V2a1 1 0 0 0-1-1H4a1 1 0 0 0-1 1v.5H2v10h12v-10h-1z M9 8H7v4h2V8zm1-3H6v2h4V5z"},{name:"Đánh giá của bạn",path:`/user/${this.userInfo.id}/feedbacks`,iconPath:"M2 3.5V2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v1.5h1a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1v-10a1 1 0 0 1 1-1h1zm11-1V2a1 1 0 0 0-1-1H4a1 1 0 0 0-1 1v.5H2v10h12v-10h-1z M9 8H7v4h2V8zm1-3H6v2h4V5z"}]}},methods:{async fetchUserInfo(){var r;try{const s=await g.get(`/users/${this.user.id}`);console.log(s.data),this.userInfo=s.data.data,this.email=V.get("email"),sessionStorage.setItem("email",this.userInfo.userName),this.$route.meta.userInfo=this.userInfo}catch(s){((r=s.response)==null?void 0:r.status)===404?(this.$toast.error("Chưa có thông tin người dùng, hãy tạo mới!"),this.$router.push({name:"CreateUser",query:{accountId:this.user.id}})):this.$toast.error(s.message||"Đã xảy ra lỗi khi tải thông tin người dùng")}}},created(){this.fetchUserInfo()}},x={id:"user",class:"d-flex"},k={id:"logo-sidebar",class:"sidebar"},y={class:"h-100 px-3 pt-4 pb-2 overflow-auto"},z={class:"nav flex-column"},H={class:"user-info mt-4 d-flex align-items-center",style:{"flex-direction":"column"}},$=["src"],M={class:"ms-3"},b={class:"user-name"},C={key:0,class:"user-role"},U={class:"bi text-secondary","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 16 16",width:"20",height:"20"},N=["d"],B={class:"ms-2"},P={class:"container",style:{"margin-left":"10px"}};function S(r,s,A,R,c,n){const u=h("router-link"),d=h("RouterView");return a(),t("div",x,[e("div",k,[e("div",y,[e("ul",z,[e("div",H,[e("img",{src:this.userInfo.imageURL||"https://res.cloudinary.com/dtza0pk4w/image/upload/v1734758873/default_avatar.jpg",alt:"User Avatar",class:"avatar"},null,8,$),e("div",M,[e("p",b,i(c.userInfo.userName),1),n.role?(a(),t("p",C,"Vai trò: "+i(n.role),1)):_("",!0)])]),(a(!0),t(f,null,v(n.navItems,o=>(a(),t("li",{class:"nav-item mb-2",key:o.name},[l(u,{to:o.path,class:"nav-link"},{default:p(()=>[(a(),t("svg",U,[e("path",{d:o.iconPath},null,8,N)])),e("span",B,i(o.name),1)]),_:2},1032,["to"])]))),128))])])]),e("div",P,[l(d,{userInfo:c.userInfo},null,8,["userInfo"])])])}const F=m(w,[["render",S],["__scopeId","data-v-efa175d2"]]);export{F as default};
