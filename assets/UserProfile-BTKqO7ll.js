import{_ as f,c as u,o as d,a as s,t as g,i as n,E as a,v as y,A as v,g as m}from"./index-ocYKao6t.js";const h={props:{userInfo:Object},data(){var t;return{user:{...this.userInfo},logoFile:null,previewLogo:(t=this.userInfo)==null?void 0:t.imageURL}},watch:{userInfo:{handler(t){this.user={...t},this.previewLogo=t==null?void 0:t.imageURL},deep:!0,immediate:!0}},methods:{async updateUserInfo(){var t,e;try{if(this.logoFile){const o=await this.uploadLogo();(e=(t=o==null?void 0:o.data)==null?void 0:t.data)!=null&&e.imageUrl&&(this.user.imageURL=o.data.data.imageUrl)}await this.updateUser()}catch(o){console.log(o),this.$toast.error("Đã xảy ra lỗi khi lưu thông tin công ty.")}},async updateUser(){var t,e;try{const o=await m.patch("/users",this.user);this.$toast.success(o.data.message)}catch(o){console.log(o),this.$toast.error(((e=(t=o.response)==null?void 0:t.data)==null?void 0:e.message)||"Đã xảy ra lỗi")}},handleImageUpload(t){const e=t.target.files[0];if(e){const o=new FileReader;this.logoFile=e,o.onload=p=>{this.previewLogo=p.target.result},o.readAsDataURL(e)}},async uploadLogo(){const t=new FormData;return t.append("file",this.logoFile),await m.post("/media/upload",t,{params:{accountId:this.user.id},headers:{"Content-Type":"multipart/form-data"}})},formatDate(t){return new Date(t).toLocaleDateString("vi-VN")}}},U={class:"company-info"},b={key:0},L={class:"logo-container"},D=["src"],I={class:"form-group"},N={class:"readonly"},w={class:"form-group"},T={class:"form-group"},x={class:"form-group"},M={class:"form-group"},c={class:"form-group"},F={class:"form-group"},A={class:"readonly"},E={key:1};function S(t,e,o,p,r,i){return d(),u("div",U,[e[16]||(e[16]=s("h1",null,"Thông Tin Người Dùng",-1)),s("form",{onSubmit:e[6]||(e[6]=v((...l)=>i.updateUserInfo&&i.updateUserInfo(...l),["prevent"]))},[r.user?(d(),u("div",b,[s("div",L,[s("img",{src:r.previewLogo,alt:"Logo Công Ty",class:"logo"},null,8,D),s("input",{type:"file",onChange:e[0]||(e[0]=(...l)=>i.handleImageUpload&&i.handleImageUpload(...l)),class:"file-input"},null,32)]),s("div",I,[e[7]||(e[7]=s("label",null,[s("strong",null,"Mã Người Dùng:")],-1)),s("p",N,g(r.user.id),1)]),s("div",w,[e[8]||(e[8]=s("label",null,"Tên Người Dùng:",-1)),n(s("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>r.user.userName=l),type:"text",required:""},null,512),[[a,r.user.userName]])]),s("div",T,[e[9]||(e[9]=s("label",null,"Email:",-1)),n(s("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>r.user.userMail=l),type:"email",required:"",disabled:"",class:"readonly"},null,512),[[a,r.user.userMail]])]),s("div",x,[e[10]||(e[10]=s("label",null,"Số Điện Thoại:",-1)),n(s("input",{"onUpdate:modelValue":e[3]||(e[3]=l=>r.user.userPhone=l),type:"tel",required:""},null,512),[[a,r.user.userPhone]])]),s("div",M,[e[11]||(e[11]=s("label",null,"Địa Chỉ:",-1)),n(s("input",{"onUpdate:modelValue":e[4]||(e[4]=l=>r.user.userAddress=l),type:"text",required:""},null,512),[[a,r.user.userAddress]])]),s("div",c,[e[13]||(e[13]=s("label",null,"Giới tính:",-1)),n(s("select",{"onUpdate:modelValue":e[5]||(e[5]=l=>r.user.userGender=l)},e[12]||(e[12]=[s("option",{value:"MALE"},"Nam",-1),s("option",{value:"FEMALE"},"Nữ",-1)]),512),[[y,r.user.userGender]])]),s("div",F,[e[14]||(e[14]=s("label",null,"Ngày Sinh:",-1)),s("p",A,g(i.formatDate(r.user.userBirth)),1)]),e[15]||(e[15]=s("button",{type:"submit",class:"submit-btn"},"Lưu Thông Tin",-1))])):(d(),u("p",E,"Đang tải dữ liệu..."))],32)])}const _=f(h,[["render",S],["__scopeId","data-v-7dde10b3"]]);export{_ as default};
